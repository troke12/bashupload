version: '3.8'

services:
  bashupload:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: bashupload
    ports:
      - "8000:80"
    volumes:
      # Persist uploaded files
      - ./data/files:/var/files
      # Optional: mount config.local.php for custom configuration
      # Uncomment the line below if you want to use config.local.php
      - ./config.local.php:/app/config.local.php:ro
    restart: unless-stopped
    environment:
      # PHP Configuration (can be overridden)
      - PHP_UPLOAD_MAX_FILESIZE=2G
      - PHP_POST_MAX_SIZE=2G
      - PHP_MAX_EXECUTION_TIME=1800
      - PHP_MEMORY_LIMIT=256M
      # Nginx Configuration
      - SERVICE_NGINX_CLIENT_MAX_BODY_SIZE=2G
      # Document Root
      - WEB_DOCUMENT_ROOT=/app/web

